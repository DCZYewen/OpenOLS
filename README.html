<!DOCTYPE html>
<html>
<head>
<title>README.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="openols">OpenOLS</h1>
<p>The project OpenOLS is a new , light , fast OnLine Studtying system .</p>
<h1 id="for-developers">For developers</h1>
<p>我们有<code>dev.sunboy.site</code>作为本地服务器的前端地址，<code>api.sunboy.site</code>作为api的地址（不支持WebSocket）。</p>
<h2 id="lisence">Lisence</h2>
<p>This project is capable under MIT Lisence.</p>
<h2 id="key-functions">Key functions</h2>
<pre><code>    1.账户权限管理，同平台登录，管理员添加人员之类。

    2.内容管理，老师可以开课，学生可以上课。

    3.适配手机UI。

    4.课件上传，课件在线预览。

    5.非实时视频

        播放

        允许下载视频

        弹幕

        显示观看进度，禁止拖拽进度条到观看进度以后的位置

        防止挂机
        
        非活动标签页时暂停播放
        
        分为必修和选修

    6.实时视频

        播放

        直播回看  

        课堂内教师同学等实时互动
        
        防止挂机
        
            建立学生在线统计表，离线时黑色，非活动标签页时红色，挂机时黄色（判断机制？），正常时绿色

        直播模式选择

            --老师用手机直播，直推摄像头画面
            --老师用PC直播，采集摄像头和板书（PPT之类
            
    7.测试

        包括题型：单选，多选，填空，简答。由老师设置题目，客观题自动判分，主观题手动判分。

        禁止复制网页文字，如果试图复制，弹窗或将复制的文字替换为“警告”
</code></pre>
<h1 id="1%E5%AD%A6%E7%94%9F">1.学生</h1>
<h2 id="1%E4%B8%BB%E9%A1%B5">1.主页</h2>
<p>主页应该展示学生的基础个人信息，基础统计情况（？），同学的在线人数（没卵用），服务器信息（内存什么的的占用？），一句哲言？，特性介绍（滚动，这个很关键），搞个大的聊天室可以玩玩（严格限制发言频率）。</p>
<h2 id="2%E7%9B%B4%E6%92%AD%E8%AF%BE%E7%A8%8B">2.直播课程</h2>
<p>课程的列表，每个课程显示授课老师和在线人数，起止时间，课程的标题，课程的封面（默认或者老师上传）。老师如果在直播课中选择了全程录像，那么OpenOLS会记录你的离开时间（如果你有什么事物去办），并在直播回放中自动定位到该时间，但是如果你中途退出又进入，就会导致之前的回放定位被覆盖。</p>
<h2 id="3%E5%BD%95%E6%92%AD%E8%AF%BE%E7%A8%8B">3.录播课程</h2>
<p>课程的列表，每个课程显示授课老师，课程的标题，课程的封面（默认或者老师上传），已看人数。</p>
<h2 id="4%E8%B5%84%E6%BA%90%E4%B8%AD%E5%BF%83">4.资源中心</h2>
<p>按格式分区，按时间排序，可以接受一个小于30字的附加说明。比如：</p>
<pre class="hljs"><code><div>PDF

20200402英语课件.pdf
20200402化学课本.pdf

MP4

20200428物理实验视频.mp4

PPTX（PPT）

某一日的讲义.ppt
</div></code></pre>
<h2 id="5%E6%94%B6%E8%97%8F%E5%A4%B9%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD-%E5%BE%88%E5%B8%85">5.收藏夹（核心功能 ，很帅</h2>
<p>可以对服务器上的任何资源，包括 Fusion Share 和 Time Line 进行标记，使其进入收藏夹，随时进入收藏夹。如果对一个直播课进行标记，该课程回放生成之后，课程回放进入收藏夹。</p>
<p>第一次进行的标记会使标记资源进入缓冲区，如果不点击永久化就会在一定时间中删除。永久化可以进入各个子收藏夹，文件结构类似</p>
<pre class="hljs"><code><div>
收藏夹---缓冲区------语文
                |
                |---美文
                |
                |---音乐
                |
                |---点子

</div></code></pre>
<h2 id="6time-line-%E5%88%9A%E5%88%9A%E5%8F%97%E5%88%B0%E8%BE%BE%E8%8A%AC%E5%A5%87%E7%9A%84%E5%90%AF%E5%8F%91-%E5%BE%88%E9%85%B7-%E4%BD%86%E6%98%AF%E4%B9%9F%E6%AF%94%E8%BE%83%E9%9A%BE%E5%AE%9E%E7%8E%B0-%E9%9D%9E%E5%B8%B8%E5%96%9C%E6%AC%A2%E8%BF%99%E4%B8%AA%E7%82%B9%E5%AD%90">6.Time Line （刚刚受到达芬奇的启发 很酷 但是也比较难实现  非常喜欢这个点子</h2>
<p>这个界面可以给自己添加一条时间线（以天，年，月之类的为周期，在某个时间加入一个时间点，创建一个备注，创建完后讲按照类似剪辑软件中的时间线的形式呈现（一个游标，一些标记，鼠标悬浮或者屏幕点击到标记上的时候，显示这个时间点的备注。），可以对已经到时间的节点打勾表示完成。（对于三种角色都有意义）</p>
<p>同时，老师、管理员也可以选择对哪个班级创建一个时间线。在学生侧可见创建者名字等等。</p>
<p>同时Time Line区分 aroll和broll，类似剪辑中的ab部分概念，根据优先级管理事件。</p>
<h2 id="7fusion-share">7.Fusion Share</h2>
<p>这个界面学生或者老师或者管理员可以PO一篇文章，一张图片，一段声音，或者一个链接，但是不可以是视频。并且可以在内容下添加一条不超过50个字的注解。可以分享学习资料，分享学习心得，分享自己的笔记，可以选择匿名。但是超级管理员可以看到你的姓名，并对不合适的内容进行删除。</p>
<p>Share的内容可以是站内的收藏夹，或者自己的 Time Line 和 Reminder。</p>
<h2 id="8reminder">8.Reminder</h2>
<p>一个点子会突然出现在你的脑海，但是如果你没抓住它，它也许就永远消失了。在一个灵感迸发的时候，打开OpenOLS，以一个便签的形式记录下来它。你可以不先起标题而只记录你的点子。在便签里，形式就不再受到严格的限制，这是个“浮动”标签，你可以记录一段文字，一段语音。但是OpenOLS不会提醒你关于其的任何信息，你可以自行查看而不受打扰。</p>
<h2 id="9power-halt">9.Power Halt</h2>
<p>OpenOLS秉持着开放的心态，不会逼着朋友们去学习，你可以给自己设置一个合理的Halt时间，在这个时间中，你不能访问OpenOLS除了直播课以外的其他内容，从而获得一个小憩。同时OpenOLS也在你点下返回或者退出或者重新登陆之时取消你的Halt状态。</p>
<h2 id="5%E5%AE%B6%E5%BA%AD%E4%BD%9C%E4%B8%9A%E4%BD%9C%E4%B8%9A%E5%92%8C%E6%B5%8B%E8%AF%95%E7%9A%84%E8%AE%A1%E5%88%92%E6%8E%A8%E8%BF%9F%E4%BA%A4%E7%BB%99%E6%99%BA%E5%AD%A6%E7%BD%91">5.家庭作业（作业和测试的计划推迟，交给智学网</h2>
<h2 id="6%E6%B5%8B%E8%AF%95%E4%B8%AD%E5%BF%83">6.测试中心</h2>
<h2 id="statements-of-how-to-achieve">Statements of How to achieve</h2>
<p>1.前后端分离 前端使用H5 CSS HTML构建</p>
<pre><code>1.直播流服务器后端采用SRS
2.推送端输出端都使用rtmp协议。
3.前端播放直播流采用flv.js，使用h5技术播放rtmp流，最可以降低延迟。
</code></pre>
<p>2.前后端分离 后端使用fastapi构建一个统一的API系统，前端的作用是发出请求，数据由后端API提供，再由前端格式化。</p>
<p>3.数据库采用postgresql，使用fastapi访库。就基本把fastapi作为一个中间件，作为沟通前端和数据库的桥梁。</p>
<h2 id="text-statements-of-a-tour">Text Statements Of A Tour</h2>
<p><code>本部分使用site.com作为站点url</code></p>
<h3 id="%E5%AD%A6%E7%94%9F">学生</h3>
<p>进入门户<code>https://site.com</code>显示登录界面，有两个输入框，用户名，密码，自动跳转 <code>学生 教师 管理员</code>。
学生正常登录，被重定向到<code>https://site.com/student_area</code>能看见所属班级，班级人数，同学列表，直播课程，课件列表，直播回放，录播课程。
同学点击任何功能进入。</p>
<h3 id="%E8%80%81%E5%B8%88">老师</h3>
<p>进入门户<code>https://site.com</code>显示登录界面，有两个输入框，用户名，密码，自动跳转 <code>学生 教师 管理员</code>。
老师正常登录，被重定向到<code>https://site.com/teacher_area</code>能看见所教班级，点选几个班级上传课件，点选几个班级开始直播，点选几个班级上传录播录像。</p>
<h2 id="%E7%AE%A1%E7%90%86%E5%91%98">管理员</h2>
<p>进入门户<code>https://site.com</code>显示登录界面，有两个输入框，用户名，密码，自动跳转 <code>学生 教师 管理员</code>。
老师正常登录，被重定向到<code>https://site.com/administrator_area</code>能看见各个年级，增添人员，删除人员，管理资源（全部），同时应该有批量删除，批量导入csv,批量导出csv的功能。</p>
<h2 id="data-structure">Data Structure</h2>
<p>Tips：数据结构设计要谨慎，仔细根据功能考虑。</p>
<pre class="hljs"><code><div>
---------------------------------

    -----postgresql
       | 
       | #tables
       |--users
       |
       |--course
       |
       |--locations
       |
       |--classes
       |
       |--tokens

---------------------------------

For Table Users

+--------+-------+-------+---------+---------+--------+----------+--------+--------+
| USER_ID| NAME  | GRADE | CLASS   | CHAT_ID | PASSWD | IS_ONLNE | AUTH   | ACCOUNT|
+--------+-------+-------+---------+---------+--------+----------+--------+--------+
|90155664|李子豪  | 2018  | 15      |885823   |17ac5be | False   | STUDENT| 114514  |
-----------------------------------------------------------------------------------+

---------------------------------

For Table Course

+---------+-----------------+--------+------------+---------+----------------+----------------+
|COURSE_ID| TITLE           | PEOPLE | CLASS_IN   |LISTENING|TIME_START      |TIME_END        |
+---------+-----------------+--------+------------+---------+----------------+----------------+
|00000001 |从不存在的一节网课 | 45      | 1\s2\s3\s4 |25      |20200405205735  |20200405220000  |
-----------------------------------------------------------------------------------------------

---------------------------------

For Table Locations

+---------+--------------+-------------+----------------------+
|COURSE_ID| RTMP_URL     |CHAT_URL     | BOARD_URL            | 
+---------+--------------+-------------+----------------------+
|00000001 |rtmp://a.com/1| ws://a.com/1| https://a.com/a.html |
---------------------------------------------------------------

---------------------------------

For Table Classes

+--------+-------+---------+---------+
|Class_ID| GRADE | CLASS   | MEMBERS |
+--------+-------+---------+---------+
|201815  |2018   | 15      | 45      |
--------------------------------------

---------------------------------

For Table Tokens

+--------+--------------+---------+-----------+----------+-----+
|Token_NO| Time_CREATED | EXPIRED | TOKEN     | USER_ID  |AUTH |
+--------+--------------+---------+-----------+----------+-----+
|0000001 |20200418220000| False   | 39e9e146c9| 90155664 |admin|
----------------------------------------------------------------

---------------------------------


</div></code></pre>

</body>
</html>
